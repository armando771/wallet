(this.webpackJsonpwallet=this.webpackJsonpwallet||[]).push([[0],{34:function(e,t,n){e.exports=n(48)},39:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(17),c=n.n(l),o=n(15),i=(n(39),n(11)),u=n(2),s=n(13),m=n(19),d=n(20),p=n(8),h=n(23),E=n(22),v=n(14),b=n.n(v),f=n(7),g=n(21),y=function(e){return{type:"EXPENSES",state:e}},O=function(e){return{type:"FAIL_EXPENSES",error:e}},x=(n(45),function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(p.a)(a)),a.verifyInputs=a.verifyInputs.bind(Object(p.a)(a)),a.state={email:"",password:"",disabled:!0},a}return Object(d.a)(n,[{key:"handleChange",value:function(e){var t=this,n=e.target,a=n.name,r=n.value;this.setState(Object(s.a)({},a,r),(function(){return t.verifyInputs()}))}},{key:"verifyInputs",value:function(){var e=this.state,t=e.email,n=e.password,a=!(/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/.test(t)&&n.length>5);this.setState({disabled:a})}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.disabled,l=this.props.userEmail;return r.a.createElement("div",{className:"login-container"},r.a.createElement("h1",null,"Conversion Wallet"),r.a.createElement("h2",null,"Fa\xe7a seu login abaixo:"),r.a.createElement("form",{className:"form-login-container"},r.a.createElement("input",{type:"email","data-testid":"email-input",placeholder:"Seu Email:",name:"email",value:t,onChange:this.handleChange,className:"inputs"}),r.a.createElement("input",{type:"password","data-testid":"password-input",placeholder:"Sua Senha:",name:"password",value:n,onChange:this.handleChange,className:"inputs"}),r.a.createElement(o.b,{to:"/carteira",onClick:function(){return l({email:t})}},r.a.createElement("button",{type:"button",disabled:a},"Entrar"))))}}]),n}(r.a.Component)),j=Object(i.b)(null,(function(e){return{userEmail:function(t){return e({type:"EMAIL_ACTION",email:t})}}}))(x);n(47);var C=function(e){var t=e.userEmail,n=e.sumAllExpenses;return r.a.createElement("div",{className:"header-container"},r.a.createElement("span",{"data-testid":"email-field"},t),r.a.createElement("p",{"data-testid":"total-field"}," Despesa Total: R$ ",n()))};n(9);var w=function(e){var t=e.currency,n=e.handleChange,a=e.coin;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"Moeda"},"Moeda",r.a.createElement("select",{id:"Moeda",value:t,name:"currency",onChange:n,className:"inputs-wallet"},a.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)})))))};var S=function(e){var t=e.description,n=e.handleChange;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"Descri\xe7\xe3o"},"Descri\xe7\xe3o",r.a.createElement("input",{id:"Descri\xe7\xe3o",type:"text",value:t,name:"description",onChange:n,className:"inputs-wallet"})))};var k=function(e){var t=e.method,n=e.handleChange;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"M\xe9todo de pagamento"},"M\xe9todo de pagamento",r.a.createElement("select",{id:"M\xe9todo de pagamento",value:t,name:"method",onChange:n,className:"inputs-wallet"},r.a.createElement("option",null,null),r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito"))))};var N=function(e){var t=e.value,n=e.handleChange;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"Valor"},"Valor",r.a.createElement("input",{id:"Valor",type:"text",value:t,name:"value",onChange:n,className:"inputs-wallet"})))};var A=function(e){var t=e.tag,n=e.handleChange;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"Tag"},"Tag",r.a.createElement("select",{id:"Tag",value:t,name:"tag",onChange:n,className:"inputs-wallet"},r.a.createElement("option",null,null),r.a.createElement("option",null,"Alimenta\xe7\xe3o"),r.a.createElement("option",null,"Lazer"),r.a.createElement("option",null,"Trabalho"),r.a.createElement("option",null,"Transporte"),r.a.createElement("option",null,"Sa\xfade"))))};var I=function(e){var t=e.coin,n=e.value,a=e.description,l=e.currency,c=e.handleChange,o=e.method,i=e.tag;return r.a.createElement("form",{className:"form-wallet-container"},r.a.createElement(N,{value:n,handleChange:c}),r.a.createElement(S,{description:a,handleChange:c}),r.a.createElement(k,{method:o,handleChange:c}),r.a.createElement(A,{tag:i,handleChange:c}),r.a.createElement(w,{currency:l,handleChange:c,coin:t}))};var M=function(e){var t=e.OnbuttonSubmitExpense;return r.a.createElement("div",{className:"button-wallet"},r.a.createElement("button",{type:"button",onClick:t},"Adicionar despesa"))};var T=Object(i.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{remove:function(t){return e({type:"DELETE_EXPENSE",state:t})}}}))((function(e){var t=e.expenses,n=e.remove;return r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido"," Moeda de convers\xe3o"].map((function(e){return r.a.createElement("th",{scope:"col",key:e},e)})))),r.a.createElement("tbody",null,t.map((function(e){var t=e.description,a=e.tag,l=e.method,c=e.value,o=e.currency,i=e.id,u=e.exchangeRates[o],s=u.name,m=u.ask,d=s.split("/"),p=parseFloat(m).toFixed(2),h=(c*m).toFixed(2);return r.a.createElement("tr",{key:i},r.a.createElement("td",null,t),r.a.createElement("td",null,a),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,d[0]),r.a.createElement("td",null,p),r.a.createElement("td",null,h),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:function(){return n(i)},"data-testid":"delete-btn"},"Delete")))}))))})),D=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).fetchAPIcoins=a.fetchAPIcoins.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.OnbuttonSubmitExpense=a.OnbuttonSubmitExpense.bind(Object(p.a)(a)),a.sumAllExpenses=a.sumAllExpenses.bind(Object(p.a)(a)),a.state={coin:[],value:0,description:"",currency:"",method:"",tag:""},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.fetchAPIcoins()}},{key:"sumAllExpenses",value:function(){var e=this.props.expenses,t=0,n=[];return 0===e.length?t:(e.length>=1&&(e.map((function(e){return n.push(e.exchangeRates[e.currency].ask*e.value)})),t=n.reduce((function(e,t){return e+t}))),t.toFixed(2))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(s.a)({},n,a))}},{key:"OnbuttonSubmitExpense",value:function(){var e=this.props.buttonSubmitExpense,t=this.state;e({value:t.value,description:t.description,currency:t.currency,method:t.method,tag:t.tag}),this.setState({value:0,description:"",currency:"",method:"",tag:""})}},{key:"fetchAPIcoins",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://economia.awesomeapi.com.br/json/all",e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=Object.keys(n),r=a.filter((function(e){return!e.includes("USDT")})),this.setState({coin:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.coin,n=e.value,a=e.description,l=e.currency,c=e.method,o=e.tag,i=this.props.userEmail;return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement(I,{coin:t,value:n,description:a,currency:l,handleChange:this.handleChange,method:c,tag:o}),r.a.createElement(M,{OnbuttonSubmitExpense:this.OnbuttonSubmitExpense}),r.a.createElement(T,null),r.a.createElement(C,{userEmail:i,sumAllExpenses:this.sumAllExpenses})))}}]),n}(r.a.Component),F=Object(i.b)((function(e){return{userEmail:e.user.email,expenses:e.wallet.expenses}}),(function(e){return{buttonSubmitExpense:function(t){return e((n=t,function(){var e=Object(g.a)(b.a.mark((function e(t){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return a=e.sent,e.next=6,a.json();case 6:if(r=e.sent){e.next=9;break}return e.abrupt("return",t(O));case 9:t(y(Object(f.a)(Object(f.a)({},n),{},{exchangeRates:r})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n}}}))(D);var P=function(){return r.a.createElement("div",null,r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/wallet",component:j}),r.a.createElement(u.a,{path:"/carteira",component:F})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=n(10),_=n(31),z=n(32),L={email:""},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EMAIL_ACTION":return t.email;default:return e}},V=n(33),W={currencies:[],expenses:[]},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EXPENSES":return Object(f.a)(Object(f.a)({},e),{},{expenses:[].concat(Object(V.a)(e.expenses),[Object(f.a)({id:e.expenses.length},t.state)])});case"FAIL_EXPENSES":return Object(f.a)(Object(f.a)({},e),{},{error:"ERRO"});case"DELETE_EXPENSE":return Object(f.a)(Object(f.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.state}))});default:return e}},B=Object(R.combineReducers)({user:X,wallet:$}),J=Object(R.createStore)(B,Object(_.composeWithDevTools)(Object(R.applyMiddleware)(z.a)));c.a.render(r.a.createElement(i.a,{store:J},r.a.createElement(o.a,null,r.a.createElement(P,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,n){}},[[34,1,2]]]);
//# sourceMappingURL=main.2c3c9568.chunk.js.map